# Day 9: AWS CLI Installation & EC2-S3 Integration

**Date:** October 21, 2025  
**Focus:** Connecting compute and storage services via AWS CLI  
**Time Investment:** 75 minutes

---

## What I Built

Installed AWS CLI on my EC2 instance and configured it to access my S3 bucket from Day 6. Successfully listed buckets, viewed contents, and downloaded files from S3 to EC2.

**Technical Setup:**
- EC2 Instance: chris-learning-web-server (t3.micro, us-east-2)
- IAM User: chris-cli-user (AmazonS3FullAccess policy)
- S3 Bucket: chris-aws-journey-2025
- CLI Configuration: Access keys stored in ~/.aws/credentials

---

## Commands Executed

### AWS CLI Installation
```bash
sudo yum update -y
curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
unzip awscliv2.zip
sudo ./aws/install
aws --version
```

### CLI Configuration
```bash
aws configure
# Entered: Access Key ID, Secret Access Key, us-east-2, json
```

### Testing S3 Access
```bash
aws s3 ls                                           # List all buckets
aws s3 ls s3://chris-aws-journey-2025/              # List bucket contents
aws s3 cp s3://chris-aws-journey-2025/index.html ./downloaded.html  # Download file
cat downloaded.html                                  # Verify download
```

---

## Key Learnings

**Service Independence (Loose Coupling):** EC2 and S3 are separate services that communicate via APIs. Terminating the EC2 instance doesn't affect S3 data. This architectural principle enables resilience and scalability.

**Authentication Mechanisms:**
- SSH keys (.pem): Cryptographic authentication for terminal access to EC2
- AWS access keys: Programmatic authentication for AWS API calls
- These serve different purposes and are stored in different locations

**Credentials Storage Security:** When running `aws configure` on EC2, credentials are stored ON THE INSTANCE at `~/.aws/credentials` in plaintext. Anyone with SSH access can read them. This is why production uses IAM Roles instead of hardcoded credentials.

**IAM Roles vs Hardcoded Credentials:**
- Hardcoded: Long-lived, can be stolen, must be rotated manually
- Roles: Temporary, auto-rotating, can't be stolen and reused elsewhere
- Production best practice: Always use IAM Roles for EC2-to-service communication

**Cross-Region Communication:** AWS services can communicate across regions via internet/backbone network. Works fine but incurs higher latency and data transfer costs. Best practice: keep frequently-communicating resources in same region.

**Global Service Scope:** `aws s3 ls` lists ALL buckets across ALL regions because S3 bucket names are globally unique. The CLI isn't limited to the configured region for this command.

---

## Knowledge Check Answers

**Q: Difference between SSH keys and AWS access keys?**  
SSH keys authenticate terminal access to EC2 instances. AWS access keys authenticate programmatic API calls to AWS services. SSH keys are stored locally on my laptop. AWS access keys are stored on the EC2 instance in `~/.aws/credentials`. Losing the SSH .pem key means permanent lockout from that instance. Losing AWS access keys means I need to generate new ones in IAM Console.

**Q: Why are IAM Roles more secure than hardcoded credentials?**  
Roles provide temporary credentials that AWS auto-rotates. If someone compromises my EC2 instance, they can't steal and reuse role credentials elsewhere. With hardcoded access keys, an attacker can copy them and use them from any location with whatever permissions are attached to that IAM user.

**Q: What happens if I terminate my EC2 instance?**  
My S3 bucket and all files remain intact. Services are loosely coupled - destroying one doesn't affect the other. I can still access S3 from the Console or AWS CLI on other devices. This demonstrates AWS's service independence architecture.

**Q: Can EC2 in Ohio access S3 in Ireland?**  
Yes, cross-region communication works via AWS backbone network. It would be slower (higher latency due to geographic distance) and cost more (inter-region data transfer fees). Best practice is same-region for frequently-communicating services.

**Q: What does `aws s3 ls` show?**  
All S3 buckets I own across all regions globally, not just buckets in my configured region (us-east-2). S3 bucket names are globally unique, and the CLI lists everything.

**Q: How would I grant EC2 access to S3 in production?**  
Use an IAM Role attached to the EC2 instance, NOT hardcoded credentials via `aws configure`. Roles provide temporary, auto-rotating credentials that can't be stolen and reused, making them significantly more secure.

---

## Challenges Encountered

**Challenge: Understanding credentials storage**  
Initially thought AWS access keys were stored locally on my laptop since that's where the SSH .pem key lives. Learned that `aws configure` stores credentials ON THE EC2 INSTANCE at `~/.aws/credentials`, making them vulnerable if someone gains SSH access.

**Solution:** Recognized this is a learning setup. In production, would use IAM Roles to avoid storing any credentials on the instance.

---

## Next Steps

- Day 10: Attach an IAM Role to my EC2 instance and remove hardcoded credentials
- Practice: Explore more AWS CLI commands (s3 sync, s3 rm, s3 mb)
- Learn: Understand how boto3 (Python SDK) uses the same authentication mechanism

---

## Week 2 Progress

- Day 8: ✅ EC2 instance launched and web server deployed
- Day 9: ✅ AWS CLI installed and integrated with S3
- Day 10-14: IAM Roles, networking concepts, additional integrations
